!function(window){"use strict";var scrollLastPos=null,scrollTimer=0,scroll={},obj={};function track(){var newPos=window.scrollY||window.pageYOffset;null!=scrollLastPos&&(scroll.velocity=newPos-scrollLastPos,scroll.delta=scroll.velocity>=0?scroll.velocity:-1*scroll.velocity),scrollLastPos=newPos,scrollTimer&&clearTimeout(scrollTimer),scrollTimer=setTimeout((function(){scrollLastPos=null}),30)}function viewable(el,bounds){var rect=el.getBoundingClientRect();return rect.top+rect.height>=0&&rect.left+rect.width>=0&&rect.bottom-rect.height<=(window.innerHeight||document.documentElement.clientHeight)+bounds&&rect.right-rect.width<=(window.innerWidth||document.documentElement.clientWidth)+bounds}addEventListener("scroll",track,!1),function(obj){var initd=!1,elements=[],elementsLength,reappear=[],appeared=0,disappeared=0,timer,deltaSet,opts={},done;function debounce(fn,delay){return function(){var self=this,args=arguments;clearTimeout(timer),timer=setTimeout((function(){fn.apply(self,args)}),delay)}}function checkAppear(){scroll.delta<opts.delta.speed&&(deltaSet||(deltaSet=!0,doCheckAppear(),setTimeout((function(){deltaSet=!1}),opts.delta.timeout))),debounce((function(){doCheckAppear()}),opts.debounce)()}function begin(){doCheckAppear(),addEventListener("scroll",checkAppear,!1),addEventListener("resize",checkAppear,!1)}function end(){elements=[],timer&&clearTimeout(timer),removeListeners()}function removeListeners(){removeEventListener("scroll",checkAppear,!1),removeEventListener("resize",checkAppear,!1)}function doCheckAppear(){done||(elements.forEach((function(n,i){n&&viewable(n,opts.bounds)?reappear[i]&&(reappear[i]=!1,appeared++,opts.appear&&opts.appear(n),opts.disappear||opts.reappear||(elements[i]=null)):(!1===reappear[i]&&(opts.disappear&&opts.disappear(n),disappeared++,opts.reappear||(elements[i]=null)),reappear[i]=!0)})),opts.reappear||opts.appear&&(!opts.appear||appeared!==elementsLength)||opts.disappear&&(!opts.disappear||disappeared!==elementsLength)||(done=!0,removeListeners(),opts.done&&opts.done()))}function init(){var els;if(!initd&&(initd=!0,opts.init&&opts.init(),els="function"==typeof opts.elements?opts.elements():opts.elements)){elementsLength=els.length;for(var i=0;i<elementsLength;i+=1)elements.push(els[i]),reappear.push(!0);begin()}}var appear=function(obj){opts={init:(obj=obj||{}).init,elements:obj.elements,appear:obj.appear,disappear:obj.disappear,done:obj.done,reappear:obj.reappear,bounds:obj.bounds||0,debounce:obj.debounce||50,delta:{speed:obj.deltaSpeed||50,timeout:obj.deltaTimeout||500}},addEventListener("DOMContentLoaded",init,!1);var isIE10=!1;Function("/*@cc_on return document.documentMode===10@*/")()&&(isIE10=!0);var completeOrLoaded="complete"===document.readyState||"loaded"===document.readyState;return isIE10?completeOrLoaded&&init():(completeOrLoaded||"interactive"===document.readyState)&&init(),{trigger:function trigger(){doCheckAppear()},pause:function pause(){removeListeners()},resume:function resume(){begin()},destroy:function destroy(){end()}}};"undefined"!=typeof module&&void 0!==module.exports?module.exports=appear:window.appear=appear}(obj)}(this);